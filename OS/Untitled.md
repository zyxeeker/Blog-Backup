## OS的目的

## OS 组织结构
OS结构包括三块：**用户空间**（User Space），**内核**（Kernel）以及**硬件接口**（h/w）
![](../img/Pasted%20image%2020210319131555.png)

- 用户空间主要包含用户应用，比如，vim，gcc 等等
- 内核包含各种内核服务，比如 FS （File System）
- 硬件接口包括 CPU, RAM, disk, net 等等

### 关于内核
总结几点：
- 内核是计算机资源的守护者
- 当你打开计算机时，内核总是第一个被启动
- 内核程序只有一个，它维护数据来管理每一个用户空间进程
- 内核同时还维护了大量的数据结构来帮助它管理各种各样的硬件资源，以供用户空间的程序使用
- 内核同时还有大量内置的服务，例如，Kernel通常会有文件系统实现类似文件名，文件内容，目录的东西，并理解如何将文件存储在磁盘中。所以用户空间的程序会与Kernel中的文件系统交互，文件系统再与磁盘交互。![](../img/Pasted%20image%2020210319131153.png)

#### 内核将会提供哪些服务？
 - 进程管理服务
 - 内存分配服务
 - 文件内容管理服务
 - 文件名称以及目录管理服务
 - 访问控制服务
 - 等等

#### 内核的API
应用程序通过“系统调用函数（System Call）“来对内核进行调用，比如
```c
	fd = open("out", 1);
	write(fd, "hello\n", 6);
```

这个例子是，如果应用程序需要打开一个文件，它会调用名为 `open` 的系统调用，并且把文件名作为参数传给 `open`。假设现在要打开一个名为 `out` 的文件，那么会将文件名 `out` 作为参数传入。同时我们还希望写入数据，那么还会有一个额外的参数，在这里这个参数的值是 1，表明我想要写文件

其中的 `open` 是调用了系统函数